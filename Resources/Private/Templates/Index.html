<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
      xmlns:be="http://typo3.org/ns/TYPO3/CMS/Backend/ViewHelpers" data-namespace-typo3-fluid="true">
<head>

</head>
<f:layout name="Backend/Default"/>
<f:be.pagerenderer includeJavaScriptModules="{
         0: '@typo3/core/ajax/ajax-request.js',
         1: 'sortablejs',
         2: '@petitglacon/category-treebuilder/index.js',
         3: '@petitglacon/category-treebuilder/Category.js',
      }"/>
<f:section name="Content">

    <input id="jsonTreeInput" value="{jsonTree}" class="hidden">
    <input id="info" value="{info}" class="hidden">


    <f:comment><!--
    Page HTML
    --></f:comment>

    <div class="container-fluid">
        <div id="cat-tree-div" class="col-5">
            <ul id="cat-tree"></ul>
        </div>

        <div id="folder-tree" class="col-5"></div>
        <div id="ext-conf" class="col-2"></div>
    </div>


    <f:comment><!--
    Utils used in JS
    --></f:comment>

    <ul id="customMenu">
        <li id="menuOption0">Modify</li>
        <li id="menuOption1">Add before</li>
        <li id="menuOption2">Add inside</li>
        <li id="menuOption3">Add after</li>
    </ul>

</f:section>






<f:section name="list">
    <li><span class="cat-caret"><span class="cat-icon"><core:icon identifier="mimetypes-x-sys_category"/></span>{category.title}</span>
        <ul class="cat-nested">
            <f:if condition="{category.children -> f:count()}">
                <f:for each="{category.children}" as="cat">
                    <f:if condition="{cat.children -> f:count()}">
                        <f:then>
                            <f:render section="list" arguments="{category:cat}"></f:render>
                        </f:then>
                        <f:else>
                            <li><span class="cat-icon"><core:icon identifier="mimetypes-x-sys_category"/></span>{cat.title}
                            </li>
                        </f:else>
                    </f:if>
                </f:for>
            </f:if>
        </ul>
    </li>
</f:section>
</html>